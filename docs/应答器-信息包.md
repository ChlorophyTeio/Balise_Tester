# 信息包

## 参考表

### 1. 报文整体结构（基础框架）

```csv
模块,层级,名称,变量名,位数,核心说明,备注
报文总架构,1,包头信息帧,-,-,含帧标志、位置、编号等控制信息，所有报文必含,固定字段结构
报文总架构,2,用户信息包,-,-,核心数据区，按需组合20类功能包（ETCS15类+CTCS5类）,字段随包类型变化
报文总架构,3,信息结束标志,-,8,固定为二进制"11111111"，标识报文终止,所有报文必含
```

### 2. 包头信息帧（全字段）

```csv
模块,分类,字段名称,变量名,位数,核心说明,默认值/取值规则
包头信息,帧标志,信息传输方向,Q_UPDOWN,1,0=车对地，1=地对车,应答器默认1
包头信息,帧标志,代码版本,M_VERSION,7,语言/代码版本编号,0010000=V1.0（默认）
包头信息,帧标志,传输媒介,Q_MEDIA,1,0=应答器，1=环线,应答器默认0
包头信息,位置与数量,组内位置,N_PIG,3,组内应答器序号,000=第1个、111=第8个
包头信息,位置与数量,组内总数量,N_TOTAL,3,组内应答器总数,000=1个、111=8个
包头信息,数据关系,信息重复标识,M_DUP,2,与前后应答器信息关系,00=不同/01=与后相同/10=与前相同
包头信息,计数器,报文计数器,M_MCOUNT,8,报文计数标识,无源=255/有源默认=252/LEU=0/TCC正常=255/TCC故障=253
包头信息,标识编号,地区编号,NID_C,10,高7位=大区编号，低3位=分区编号,无
包头信息,标识编号,应答器标识号,NID_BG,14,高6位=车站编号，低8位=应答器编号,无
包头信息,链接关系,链接状态,Q_LINK,1,0=不被链接，1=被链接,仅调车应答器组可设0
```

### 3. ETCS标准信息包（15类，按功能排序）

#### 3.1 应答器链接【ETCS-5】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,应答器链接【ETCS-5】,信息包标识,NID_PACKET,8,标识当前信息包类型,固定00000101
ETCS标准包,应答器链接【ETCS-5】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
ETCS标准包,应答器链接【ETCS-5】,距离分辨率,Q_SCALE,2,距离字段的精度,00=10cm/01=1m/10=10m
ETCS标准包,应答器链接【ETCS-5】,链接距离,D_LINK,15,到下一个链接应答器组的距离,无
ETCS标准包,应答器链接【ETCS-5】,地区关系,Q_NEWCOUNTRY,1,链接组与当前组是否同地区,0=相同/1=不同（不同时需填NID_C）
ETCS标准包,应答器链接【ETCS-5】,地区编号,NID_C,10,链接组所属地区编号,仅Q_NEWCOUNTRY=1时有效
ETCS标准包,应答器链接【ETCS-5】,应答器组编号,NID_BG,14,被链接应答器组的标识号,16383=重定位
ETCS标准包,应答器链接【ETCS-5】,运行方向,Q_LINKORIENTATION,1,链接组的运行方向,0=反向/1=正向
ETCS标准包,应答器链接【ETCS-5】,链接失败措施,Q_LINKREACTION,2,链接失效时的车载响应,00=紧急制动/01=常用制动/10=无反应/11=备用
ETCS标准包,应答器链接【ETCS-5】,安装偏差,Q_LOCACC,6,应答器安装位置允许偏差,0~±63m（默认±5m）
ETCS标准包,应答器链接【ETCS-5】,链接组数量,N_ITER,5,包含的链接应答器组数量,无
```

#### 3.2 线路坡度【ETCS-21】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,线路坡度【ETCS-21】,信息包标识,NID_PACKET,8,标识当前信息包类型,固定00010101
ETCS标准包,线路坡度【ETCS-21】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
ETCS标准包,线路坡度【ETCS-21】,距离分辨率,Q_SCALE,2,距离字段的精度,00=10cm/01=1m/10=10m（默认1m）
ETCS标准包,线路坡度【ETCS-21】,坡度起始点距离,D_GRADIENT,15,到坡度信息起始点/变化点的距离,无
ETCS标准包,线路坡度【ETCS-21】,坡度方向,Q_GDIR,1,坡度类型标识,0=下坡/平坡/1=上坡
ETCS标准包,线路坡度【ETCS-21】,安全坡度,G_A,8,线路坡度值（分辨率1%）,255=坡度描述结束；数据向安全侧取整
ETCS标准包,线路坡度【ETCS-21】,坡度变化点数量,N_ITER,5,包含的坡度变化点数量,无
```

#### 3.3 线路速度【ETCS-27】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,线路速度【ETCS-27】,信息包标识,NID_PACKET,8,标识当前信息包类型,固定00011011
ETCS标准包,线路速度【ETCS-27】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
ETCS标准包,线路速度【ETCS-27】,距离分辨率,Q_SCALE,2,距离字段的精度,00=10cm/01=1m/10=10m
ETCS标准包,线路速度【ETCS-27】,速度起始点距离,D_STATIC,15,到速度信息起始点/变化点的距离,无
ETCS标准包,线路速度【ETCS-27】,最大允许速度,V_STATIC,7,线路允许最高速度（分辨率5km/h）,127=速度描述结束；≤CTCS-2最高速度
ETCS标准包,线路速度【ETCS-27】,头尾有效性,Q_FRONT,1,速度限制的头尾有效性,0=车载确定/1=头有效（地面默认0）
ETCS标准包,线路速度【ETCS-27】,列车类型,NC_DIFF,4,适配的列车类型,0000=主动摆式/0001=被动摆式/0010=交叉风敏感（无特殊要求取消）
ETCS标准包,线路速度【ETCS-27】,列车类型速度,V_DIFF,7,对应列车类型的允许速度,分辨率5km/h（仅NC_DIFF有效时填）
ETCS标准包,线路速度【ETCS-27】,速度变化点数量,N_ITER,5,包含的速度变化点数量,无
```

#### 3.4 等级转换【ETCS-41】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,等级转换【ETCS-41】,信息包标识,NID_PACKET,8,标识当前信息包类型,固定00101001
ETCS标准包,等级转换【ETCS-41】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
ETCS标准包,等级转换【ETCS-41】,距离分辨率,Q_SCALE,2,距离字段的精度,00=10cm/01=1m/10=10m
ETCS标准包,等级转换【ETCS-41】,转换点距离,D_LEVELTR,15,到等级转换点的距离,无
ETCS标准包,等级转换【ETCS-41】,ETCS转换等级,M_LEVELTR,3,目标列控等级,000=ETCS-0/001=STM/010=ETCS-1/011=ETCS-2/100=ETCS-3
ETCS标准包,等级转换【ETCS-41】,非ETCS转换等级,NID_STM,8,非ETCS的目标等级,M_LEVELTR=1时有效；00000001=CTCS-0/00000011=CTCS-2
ETCS标准包,等级转换【ETCS-41】,确认区段长度,L_ACKLEVELTR,15,转换点外方确认区段长度,预告应答器=5s走行距离；执行应答器=0
ETCS标准包,等级转换【ETCS-41】,转换点数量,N_ITER,5,包含的等级转换点数量,无
```

#### 3.5 通信管理【ETCS-42】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,通信管理【ETCS-42】,信息包标识,NID_PACKET,8,标识当前信息包类型,固定00101010
ETCS标准包,通信管理【ETCS-42】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
ETCS标准包,通信管理【ETCS-42】,通信命令,Q_RBC,1,与RBC的通信指令,0=终止通信/1=建立通信
ETCS标准包,通信管理【ETCS-42】,地区编号,NID_C,10,RBC所属地区编号,高7位=大区/低3位=分区
ETCS标准包,通信管理【ETCS-42】,RBC编号,NID_RBC,14,RBC设备标识号,无
ETCS标准包,通信管理【ETCS-42】,无线用户号码,NID_RADIO,64,呼叫RBC的无线号码,16位数字（不足补"F"）；全"F"呼叫车载存储号
ETCS标准包,通信管理【ETCS-42】,休眠通信管理,Q_SLEEPSESSION,1,休眠设备的通信规则,0=忽略/1=考虑
```

#### 3.6 CTCS数据容器【ETCS-44】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,CTCS数据容器【ETCS-44】,信息包标识,NID_PACKET,8,标识当前信息包类型,固定00101100
ETCS标准包,CTCS数据容器【ETCS-44】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
ETCS标准包,CTCS数据容器【ETCS-44】,CTCS包标识码,NID_XUSER,9,标识嵌入的CTCS自定义包,000000001=轨道区段/000000010=临时限速等
```

#### 3.7 有条件等级转换【ETCS-46】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,有条件等级转换【ETCS-46】,信息包标识,NID_PACKET,8,标识当前信息包类型,固定00101110
ETCS标准包,有条件等级转换【ETCS-46】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
ETCS标准包,有条件等级转换【ETCS-46】,ETCS转换等级,M_LEVELTR,3,优先级等级列表,按优先级切换列控等级
ETCS标准包,有条件等级转换【ETCS-46】,非ETCS转换等级,NID_STM,8,非ETCS的目标等级,同【ETCS-41】的NID_STM规则
ETCS标准包,有条件等级转换【ETCS-46】,转换点数量,N_ITER,5,包含的等级转换点数量,无
```

#### 3.8 特殊区段【ETCS-68】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,特殊区段【ETCS-68】,信息包标识,NID_PACKET,8,标识当前信息包类型,固定01000100
ETCS标准包,特殊区段【ETCS-68】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
ETCS标准包,特殊区段【ETCS-68】,距离分辨率,Q_SCALE,2,距离字段的精度,00=10cm/01=1m/10=10m
ETCS标准包,特殊区段【ETCS-68】,状态恢复要求,Q_TRACKINIT,1,是否需指定状态恢复点,0=无/1=有（有则填D_TRACKINIT）
ETCS标准包,特殊区段【ETCS-68】,状态恢复点距离,D_TRACKINIT,15,到状态恢复点的距离,仅Q_TRACKINIT=1时有效
ETCS标准包,特殊区段【ETCS-68】,特殊区段类型,M_TRACKCOND,4,区段类型标识,0000=禁停隧道/0011=无电区间/0100=无线盲区等
ETCS标准包,特殊区段【ETCS-68】,特殊区段距离,D_TRACKCOND,15,到特殊区段的距离,仅Q_TRACKINIT=0时有效
ETCS标准包,特殊区段【ETCS-68】,特殊区段长度,L_TRACKCOND,15,特殊区段的物理长度,仅Q_TRACKINIT=0时有效
ETCS标准包,特殊区段【ETCS-68】,区段数量,N_ITER,5,包含的特殊区段数量,仅Q_TRACKINIT=0时有效
```

#### 3.9 文本信息【ETCS-72】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,文本信息【ETCS-72】,信息包标识,NID_PACKET,8,标识当前信息包类型,固定01001000
ETCS标准包,文本信息【ETCS-72】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
ETCS标准包,文本信息【ETCS-72】,距离分辨率,Q_SCALE,2,距离字段的精度,00=10cm/01=1m/10=10m
ETCS标准包,文本信息【ETCS-72】,显示类型,Q_TEXTCLASS,2,文本重要程度,00=辅助信息/01=重要信息/10=司机确认/11=备用
ETCS标准包,文本信息【ETCS-72】,显示距离,D_TEXTDISPLAY,15,到文本显示起始点的距离,无
ETCS标准包,文本信息【ETCS-72】,显示区长度,L_TEXTDISPLAY,15,文本显示有效区段长度,无
ETCS标准包,文本信息【ETCS-72】,显示时间,T_TEXTDISPLAY,10,文本显示持续时间,1023=无时间限制
ETCS标准包,文本信息【ETCS-72】,文本字节长度,L_TEXT,8,文本内容的字节数,无
ETCS标准包,文本信息【ETCS-72】,文本内容,X_TEXT,8*N,显示的文本内容,GB18030编码；车站名前加"*"
```

#### 3.10 里程信息【ETCS-79】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,里程信息【ETCS-79】,信息包标识,NID_PACKET,8,标识当前信息包类型,固定01001111
ETCS标准包,里程信息【ETCS-79】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
ETCS标准包,里程信息【ETCS-79】,距离分辨率,Q_SCALE,2,距离字段的精度,00=10cm/01=1m/10=10m（公里标>1048km用10m）
ETCS标准包,里程信息【ETCS-79】,地区关系,Q_NEWCOUNTRY,1,里程所属地区与当前是否一致,0=相同/1=不同（不同填NID_C）
ETCS标准包,里程信息【ETCS-79】,地区编号,NID_C,10,里程所属地区编号,仅Q_NEWCOUNTRY=1时有效
ETCS标准包,里程信息【ETCS-79】,线路公里标,M_POSITION,20,线路里程公里标值,无
ETCS标准包,里程信息【ETCS-79】,计数方向,Q_MPOSITION,1,公里标计数方向,0=递减/1=递增
ETCS标准包,里程信息【ETCS-79】,偏移量,D_POSOFF,15,公里标偏移量（长短链）,无
ETCS标准包,里程信息【ETCS-79】,公里标数量,N_ITER,5,包含的公里标数量,无
```

#### 3.11 RBC切换命令【ETCS-131】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,RBC切换命令【ETCS-131】,信息包标识,NID_PACKET,8,标识当前信息包类型,固定10000011
ETCS标准包,RBC切换命令【ETCS-131】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
ETCS标准包,RBC切换命令【ETCS-131】,距离分辨率,Q_SCALE,2,距离字段的精度,00=10cm/01=1m/10=10m
ETCS标准包,RBC切换命令【ETCS-131】,切换点距离,D_RBCTR,15,到RBC切换点的距离,无
ETCS标准包,RBC切换命令【ETCS-131】,目标RBC编号,NID_RBC,14,切换后的RBC标识号,无
ETCS标准包,RBC切换命令【ETCS-131】,目标无线号码,NID_RADIO,64,目标RBC的无线号码,16位数字（不足补"F"）
ETCS标准包,RBC切换命令【ETCS-131】,休眠通信管理,Q_SLEEPSESSION,1,休眠设备的切换规则,0=忽略/1=考虑
```

#### 3.12 调车危险【ETCS-132】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,调车危险【ETCS-132】,信息包标识,NID_PACKET,8,标识当前信息包类型,固定10000100
ETCS标准包,调车危险【ETCS-132】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
ETCS标准包,调车危险【ETCS-132】,调车停车指令,Q_ASPECT,1,调车模式下的安全指令,0=立即停车/1=继续行车
```

#### 3.13 目视行车危险【ETCS-137】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,目视行车危险【ETCS-137】,信息包标识,NID_PACKET,8,标识当前信息包类型,固定10001001
ETCS标准包,目视行车危险【ETCS-137】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
ETCS标准包,目视行车危险【ETCS-137】,目视停车指令,SRSTOP,1,目视模式下的安全指令,0=必须停车/1=继续运行
```

#### 3.14 默认信息【ETCS-254】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,默认信息【ETCS-254】,信息包标识,NID_PACKET,8,标识当前信息包类型,固定11111110
ETCS标准包,默认信息【ETCS-254】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
ETCS标准包,默认信息【ETCS-254】,信息包长度,L_PACKET,13,当前信息包的总位数,无
```

#### 3.15 空报文

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
ETCS标准包,空报文,-,-,-,仅含包头+结束标志，无用户信息包,调车信号开放/非动车进路场景使用
```

### 4. CTCS自定义信息包（5类）

#### 4.1 轨道区段【CTCS-1】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
CTCS自定义包,轨道区段【CTCS-1】,CTCS包标识码,NID_XUSER,9,标识当前CTCS包类型,固定000000001
CTCS自定义包,轨道区段【CTCS-1】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
CTCS自定义包,轨道区段【CTCS-1】,距离分辨率,Q_SCALE,2,距离字段的精度,00=10cm/01=1m/10=10m
CTCS自定义包,轨道区段【CTCS-1】,信号机类型,NID_SIGNAL,4,区段关联的信号机类型,0000=无/0001=进站/0010=出站等
CTCS自定义包,轨道区段【CTCS-1】,载频,NID_FREQUENCY,5,区段使用的载频值,1700/2000/2300/2600Hz
CTCS自定义包,轨道区段【CTCS-1】,区段起始距离,D_SIGNAL,15,到区段起始点的距离,无
CTCS自定义包,轨道区段【CTCS-1】,区段长度,L_SECTION,15,轨道区段的物理长度,无
CTCS自定义包,轨道区段【CTCS-1】,区段数量,N_ITER,5,包含的轨道区段数量,无
```

#### 4.2 临时限速【CTCS-2】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
CTCS自定义包,临时限速【CTCS-2】,CTCS包标识码,NID_XUSER,9,标识当前CTCS包类型,固定000000010
CTCS自定义包,临时限速【CTCS-2】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
CTCS自定义包,临时限速【CTCS-2】,距离分辨率,Q_SCALE,2,距离字段的精度,00=10cm/01=1m/10=10m
CTCS自定义包,临时限速【CTCS-2】,限制速度,V_TSR,7,区段临时限速值（分辨率5km/h）,无
CTCS自定义包,临时限速【CTCS-2】,限速区段距离,D_TSR,15,到限速区段起始点的距离,无
CTCS自定义包,临时限速【CTCS-2】,限速区段长度,L_TSR,15,限速区段的物理长度,无
CTCS自定义包,临时限速【CTCS-2】,有效区段长度,L_TSRarea,15,限速指令的有效区段长度,衔接处延伸80m重叠区
CTCS自定义包,临时限速【CTCS-2】,限速区段数量,N_ITER,5,包含的限速区段数量,无
```

#### 4.3 区间反向运行【CTCS-3】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
CTCS自定义包,区间反向运行【CTCS-3】,CTCS包标识码,NID_XUSER,9,标识当前CTCS包类型,固定000000011
CTCS自定义包,区间反向运行【CTCS-3】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
CTCS自定义包,区间反向运行【CTCS-3】,距离分辨率,Q_SCALE,2,距离字段的精度,00=10cm/01=1m/10=10m
CTCS自定义包,区间反向运行【CTCS-3】,反向起点距离,D_STARTREVERSE,15,到反向运行起始点的距离,无
CTCS自定义包,区间反向运行【CTCS-3】,反向运行长度,L_REVERSEAREA,15,反向运行的区段长度,无
```

#### 4.4 大号码道岔【CTCS-4】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
CTCS自定义包,大号码道岔【CTCS-4】,CTCS包标识码,NID_XUSER,9,标识当前CTCS包类型,固定000000100
CTCS自定义包,大号码道岔【CTCS-4】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
CTCS自定义包,大号码道岔【CTCS-4】,距离分辨率,Q_SCALE,2,距离字段的精度,00=10cm/01=1m/10=10m
CTCS自定义包,大号码道岔【CTCS-4】,道岔距离,D_TURNOUT,15,到道岔中心的距离,无
CTCS自定义包,大号码道岔【CTCS-4】,侧向最大速度,V_TURNOUT,7,道岔侧向允许速度（分辨率5km/h）,仅18号及以上道岔有效
```

#### 4.5 绝对停车【CTCS-5】

```csv
模块,信息包名称,字段名称,变量名,位数,核心说明,取值规则
CTCS自定义包,绝对停车【CTCS-5】,CTCS包标识码,NID_XUSER,9,标识当前CTCS包类型,固定000000101
CTCS自定义包,绝对停车【CTCS-5】,验证方向,Q_DIR,2,信息包有效方向,00=反向/01=正向/10=双向/11=备用
CTCS自定义包,绝对停车【CTCS-5】,停车指令,Q_STOP,1,绝对停车控制指令,0=立即停车/1=备用（仅0有效）
```

### 总结

1. 应答器报文核心分为**包头信息帧+用户信息包+结束标志**三层，包头为固定字段，用户包按需组合。
2. 所有信息包均以`NID_PACKET`（8位）标识类型，`Q_DIR`（2位）定义有效方向，核心数值字段多含分辨率（`Q_SCALE`）控制精度。
3. ETCS包为基础标准包，CTCS包为国内自定义扩展包，通过【ETCS-44】的`NID_XUSER`字段嵌入使用。
